	AREA AsmTemplate, CODE, READONLY
	IMPORT main
	
	EXPORT start

start
	LDR R0, =sample
	BL convert
	LDR R0, =result
	STR R1, [R0]
x	B x
	
convert
	;save any registers that are to be used
	STMFD SP!, [R4-R12]	;store registers
	LDR R12, #0		;R12 = 0
	LDR R11, #10		;R11 = 10
	LDR R4, R0		;Load sample address
	LDR R5, #0 		;Counter
	
while
	LDRB R6, [R4, R5]	;Load value at sample address + offset
	CMP R6, 0x30		;If value > 0x30 (0)
	BLT endWh		;&&
	CMP R6, 0x39		;If value < 0x39 (9)
	BHT endWh
	SUB R7, R6, 0x30	;Convert 0xwhatever to whatever
	MUL R12, R11, R12	;multiplication factor
	ADD R12, R7, R12	;Add value to factor
	ADD R5, R5, #1		;Counter++
	B while	
endWh	
	MOV R1, R12		;Move calculated value into R1
	LDMFD SP!, [R4-12]	;Restore values of registers
	;restOre the original values of any registers that were used, except R1
	BX R14


	AREA SampleStuff, DATA, READWRITE

sample	DCB "345 "
result	SPACE 4

	END


