<html><head><meta charset="utf-8"><title>Pretty Diff</title><style>body {text-align: center;}#wrapper {display: inline-block;margin-top: 1em;min-width: 800px;text-align: left;}h2 {background: #fafafa;background: -moz-linear-gradient(#fafafa, #eaeaea);background: -webkit-linear-gradient(#fafafa, #eaeaea);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr='#fafafa',endColorstr='#eaeaea')";border: 1px solid #d8d8d8;border-bottom: 0;color: #555;font: 14px sans-serif;overflow: hidden;padding: 10px 6px;text-shadow: 0 1px 0 white;margin: 0;}.file-diff {border: 1px solid #d8d8d8;margin-bottom: 1em;overflow: auto;padding: 0.5em 0;}.file-diff > div {width: 100%:}pre {margin: 0;font-family: "Bitstream Vera Sans Mono", Courier, monospace;font-size: 12px;line-height: 1.4em;text-indent: 0.5em;}.file {color: #aaa;}.delete {background-color: #fdd;}.insert {background-color: #dfd;}.info {color: #a0b;}</style></head><body><div id="wrapper"><h2>middlingbad.c</h2><div class="file-diff"><pre class="file">diff --git a/middlingbad.c b/lessbadcat.c</pre><pre class="context">index b1eeb0e..caf1ed4 100644</pre><pre class="delete">--- a/middlingbad.c</pre><pre class="insert">+++ b/lessbadcat.c</pre><pre class="info">@@ -2,11 +2,19 @@</pre><pre class="context"> #include &lt;stdlib.h&gt; // For exit()</pre><pre class="context"> #include &lt;string.h&gt; // for strncpy</pre><pre class="context"> #include &lt;limits.h&gt; // for PATH_MAX</pre><pre class="insert">+#include &lt;ctype.h&gt; // for isprint()</pre><pre class="context"> </pre><pre class="context"> ///&lt; A program to print a file - like our own version of 'cat'</pre><pre class="context"> ///&lt; It's good to include some comment at leat</pre><pre class="context"> //</pre><pre class="context"> </pre><pre class="insert">+// provide some help if needed</pre><pre class="insert">+void usage(char *prog)</pre><pre class="insert">+{</pre><pre class="insert">+	fprintf(stderr,"usage: %s [filename]\n",prog);</pre><pre class="insert">+	exit(1);</pre><pre class="insert">+}</pre><pre class="insert">+</pre><pre class="context"> int main(int argc,char*argv[])</pre><pre class="context"> {</pre><pre class="context"> 	FILE *fptr;</pre><pre class="info">@@ -45,19 +53,27 @@ int main(int argc,char*argv[])</pre><pre class="context"> 			exit(5);</pre><pre class="context"> 		}</pre><pre class="context"> </pre><pre class="delete">-	} </pre><pre class="insert">+	} else {</pre><pre class="insert">+		usage(argv[0]);</pre><pre class="insert">+	}</pre><pre class="context"> </pre><pre class="context"> 	// Open file</pre><pre class="context"> 	fptr = fopen(filename, "r");</pre><pre class="context"> 	if (fptr == NULL) { // the "==" vs. "=" here means not crashing every time</pre><pre class="delete">-		printf("Cannot open file \n"); </pre><pre class="insert">+		printf("Cannot open file: |%s|\n",filename); // provide feedbac, could be typo'd spaces at end </pre><pre class="context"> 		exit(5); // don't return zero - that's used for 'success' by convention</pre><pre class="context"> 	}</pre><pre class="context"> </pre><pre class="context"> 	// Read contents from file</pre><pre class="context"> 	c = (char) fgetc(fptr);</pre><pre class="context"> 	while (c != EOF) {</pre><pre class="delete">-		printf ("%c", c); </pre><pre class="insert">+		// this is hacky still - switching to a hexdump mode would be better</pre><pre class="insert">+		// but binary crap on a terminal can be v. bad news, so don't...</pre><pre class="insert">+		if (!isprint(c) &amp;&amp; !isspace(c) &amp;&amp; c!='\n' &amp;&amp; c!='\r') {  </pre><pre class="insert">+			printf ("0x%x", c); // could be better - why print binary crap?</pre><pre class="insert">+		} else {</pre><pre class="insert">+			printf ("%c", c); </pre><pre class="insert">+		}</pre><pre class="context"> 		c = fgetc(fptr);</pre><pre class="context"> 	}</pre><pre class="context"> </pre></div></div></body></html>
